<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>V60 Recipe Calculator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --espresso: #3E2723;
      --dark-brown: #4E342E;
      --medium-brown: #5D4037;
      --accent: #8D6E63;
      --light-accent: #A1887F;
      --cream: #EFEBE9;
      --cream-light: #FAF7F5;
      --highlight-bg: #FFF3E0;
      --highlight-border: #FF9800;
      --text-primary: #3E2723;
      --text-secondary: #5D4037;
      --white: #FFFFFF;
      --shadow: 0 2px 8px rgba(62, 39, 35, 0.12);
      --shadow-lg: 0 4px 16px rgba(62, 39, 35, 0.16);
      --radius: 12px;
      --radius-sm: 8px;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--cream-light);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: linear-gradient(135deg, var(--espresso), var(--dark-brown));
      color: var(--white);
      padding: 2rem 1rem;
      text-align: center;
    }

    header h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
      letter-spacing: -0.02em;
    }

    header p {
      font-size: 0.95rem;
      opacity: 0.85;
      font-weight: 400;
    }

    header a {
      color: var(--cream);
      text-decoration: underline;
      text-underline-offset: 2px;
    }

    header a:hover {
      opacity: 0.9;
    }

    main {
      flex: 1;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 1.5rem 1rem 2rem;
    }

    /* Brew Steps */
    .brew-steps {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1.5rem;
    }

    .brew-steps h2 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--espresso);
    }

    .steps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 0.75rem;
    }

    .step {
      background: var(--cream);
      border-radius: var(--radius-sm);
      padding: 0.75rem 1rem;
      text-align: center;
    }

    .step-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent);
      margin-bottom: 0.25rem;
    }

    .step-detail {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .step-detail strong {
      color: var(--espresso);
    }

    /* Slider Section */
    .slider-section {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1.5rem;
    }

    .slider-section h2 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--espresso);
    }

    .slider-wrapper {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .slider-wrapper label {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-secondary);
      white-space: nowrap;
    }

    .slider-wrapper input[type="range"] {
      flex: 1;
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 3px;
      background: var(--cream);
      outline: none;
      cursor: pointer;
    }

    .slider-wrapper input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 2px 6px rgba(62, 39, 35, 0.3);
      cursor: pointer;
      transition: background 0.15s;
    }

    .slider-wrapper input[type="range"]::-webkit-slider-thumb:hover {
      background: var(--medium-brown);
    }

    .slider-wrapper input[type="range"]::-moz-range-thumb {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 2px 6px rgba(62, 39, 35, 0.3);
      cursor: pointer;
      border: none;
      transition: background 0.15s;
    }

    .slider-wrapper input[type="range"]::-moz-range-thumb:hover {
      background: var(--medium-brown);
    }

    .ratio-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--espresso);
      min-width: 52px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 0.25rem;
      padding: 0 0.1rem;
    }

    .slider-labels span {
      font-size: 0.7rem;
      color: var(--light-accent);
      font-weight: 500;
    }

    /* Table Section */
    .table-section {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      margin-bottom: 1.5rem;
    }

    .table-section h2 {
      font-size: 1.1rem;
      font-weight: 600;
      padding: 1.25rem 1.5rem 1rem;
      color: var(--espresso);
    }

    .table-wrapper {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
      min-width: 500px;
    }

    thead {
      background: var(--cream);
    }

    thead th {
      padding: 0.75rem 1rem;
      text-align: right;
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--accent);
      white-space: nowrap;
    }

    thead th:first-child {
      text-align: left;
    }

    tbody td {
      padding: 0.65rem 1rem;
      text-align: right;
      border-bottom: 1px solid var(--cream);
      font-variant-numeric: tabular-nums;
    }

    tbody td:first-child {
      text-align: left;
      font-weight: 600;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    tbody tr:hover {
      background-color: var(--cream-light);
    }

    tbody tr.highlight {
      background-color: var(--highlight-bg);
      font-weight: 600;
    }

    tbody tr.highlight td {
      border-bottom-color: #FFE0B2;
    }

    tbody tr.highlight td:first-child {
      position: relative;
    }

    tbody tr.highlight td:first-child::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--highlight-border);
      border-radius: 0 2px 2px 0;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1.5rem 1rem;
      font-size: 0.8rem;
      color: var(--light-accent);
      border-top: 1px solid var(--cream);
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 480px) {
      header {
        padding: 1.5rem 1rem;
      }

      header h1 {
        font-size: 1.4rem;
      }

      main {
        padding: 1rem 0.75rem 1.5rem;
      }

      .brew-steps, .slider-section {
        padding: 1rem 1.15rem;
      }

      .steps-grid {
        grid-template-columns: 1fr 1fr;
      }

      table {
        font-size: 0.8rem;
      }

      thead th, tbody td {
        padding: 0.6rem 0.65rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>☕ V60 Recipe Calculator</h1>
    <p>Based on <a href="https://www.youtube.com/watch?v=1oB1oDrDkHM" target="_blank" rel="noopener">James Hoffmann's Ultimate V60 Technique</a></p>
  </header>

  <main>
    <section class="brew-steps">
      <h2>Brew Steps</h2>
      <div class="steps-grid">
        <div class="step">
          <div class="step-label">1 — Bloom</div>
          <div class="step-detail">Pour <strong>2× coffee</strong> in water<br>Wait 45s, swirl</div>
        </div>
        <div class="step">
          <div class="step-label">2 — Pour 1</div>
          <div class="step-detail">Up to <strong>60%</strong> of total<br>by <strong>1:15</strong></div>
        </div>
        <div class="step">
          <div class="step-label">3 — Pour 2</div>
          <div class="step-detail">Up to <strong>100%</strong> of total<br>by <strong>1:45</strong></div>
        </div>
        <div class="step">
          <div class="step-label">4 — Finish</div>
          <div class="step-detail">Swirl &amp; drain<br>Target <strong>~3:30</strong> total</div>
        </div>
      </div>
    </section>

    <section class="slider-section">
      <h2>Coffee-to-Water Ratio</h2>
      <div class="slider-wrapper">
        <label for="ratioSlider">1 :</label>
        <input type="range" id="ratioSlider" min="14" max="18" step="0.1" value="16.7">
        <span class="ratio-value" id="ratioDisplay">1:16.7</span>
      </div>
      <div class="slider-labels">
        <span>1:14 (stronger)</span>
        <span>1:18 (lighter)</span>
      </div>
    </section>

    <section class="table-section">
      <h2>Recipe Reference Table</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Water (g)</th>
              <th>Coffee (g)</th>
              <th>Bloom (g)</th>
              <th>Pour 1 to (g)</th>
              <th>Pour 2 to (g)</th>
            </tr>
          </thead>
          <tbody id="recipeTableBody">
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    Recipe by <a href="https://www.youtube.com/watch?v=1oB1oDrDkHM" target="_blank" rel="noopener">James Hoffmann</a> · Built by <a href="https://github.com/DevSecNinja" target="_blank" rel="noopener">DevSecNinja</a>
  </footer>

  <script>
    const slider = document.getElementById('ratioSlider');
    const ratioDisplay = document.getElementById('ratioDisplay');
    const tableBody = document.getElementById('recipeTableBody');

    function generateTable(ratio) {
      let html = '';
      for (let water = 100; water <= 500; water += 20) {
        const coffee = (water / ratio).toFixed(1);
        const bloom = (coffee * 2).toFixed(0);
        const pour1 = (water * 0.6).toFixed(0);
        const pour2 = water;
        const isHighlight = water === 250;

        html += `<tr class="${isHighlight ? 'highlight' : ''}">
          <td>${water}g</td>
          <td>${coffee}g</td>
          <td>${bloom}g</td>
          <td>${pour1}g</td>
          <td>${pour2}g</td>
        </tr>`;
      }
      tableBody.innerHTML = html;
    }

    function updateRatio() {
      const ratio = parseFloat(slider.value);
      ratioDisplay.textContent = '1:' + ratio.toFixed(1);
      generateTable(ratio);
    }

    slider.addEventListener('input', updateRatio);

    // Initial render
    updateRatio();
  </script>
</body>
</html>
